(function(e){function t(e,t){i(e,t,"left","width")}function n(e,t){i(e,t,"top","height")}function i(t,n,i,h){function p(e,a){return function(){n.cycle?(z=e(z,x-1),0>z&&(z=x-1),z>x-1&&(z=0)):z=s(e(z,x-1),0,x-1);var r={};r[i]=-100*z+"%",y.animate(r,n.delay,a),g(z,n.classes.button),t.trigger("updateSlide",[z])}}function g(e,i){u(C,e,i),n.cycle||d(t,e,x),f(m,e),n.resize&&b.animate({height:m.eq(e).height()||void 0},n.resizeDelay,function(){t.parents(".slides").siblings(".navi").find(".selected."+i+":first").trigger("click")})}var b=e(".slides:first",t),m=b.children().append(e("<div>")),y=e("<div>").append(m).appendTo(b),C=e("."+n.classes.navi+":last",t),x=m.length,z=0;r(b,h,y,i,m),l(m,C,p,n.autoNavi,n.classes.button),c(t,y,p,n.classes),o(t,y,p,n.autoPlay,n.still),n.resize&&a(b,m,z),g(z,n.classes.button),v(t),e(window).resize(function(){a(b,m,z)})}function a(e,t,n){e.height(t.eq(n).height()||void 0)}function s(e,t,n){return Math.min(Math.max(e,t),n)}function r(t,n,i,a,s){t.css("overflow","hidden");var r={position:"relative"};r[n]=100*s.length+"%",r[a]="0%",i.css(r);var l={display:"top"==a?"auto":"inline-block","vertical-align":"top"},c=100/s.length;l[n]=parseInt(c,10)+"%";var o=(c-parseInt(c,10))/2+"%";"width"==n?(l["margin-left"]=o,l["margin-right"]=o):(l["margin-top"]=o,l["margin-bottom"]=o),s.each(function(t,n){e(n).css(l).addClass("slide")})}function l(t,n,i,a,s){t.each(function(t,r){var l=e("<a>",{href:"#"}).css("display","inline").bind("click",function(e){e.preventDefault(),i(function(){return t})()}).appendTo(n).addClass("title "+s);a?e(r).clone().appendTo(l):l.text(e(r).attr("title")||t+1)})}function c(e,t,n,i){function a(i,a){e.find(i).bind("click",function(e){e.preventDefault(),t.clearQueue(),n(a)()})}a("."+i.prev,function(t){var n=t-1;return e.trigger("previousSlide",[n]),n}),a("."+i.next,function(t){var n=t+1;return e.trigger("nextSlide",[n]),n}),a("."+i.first,function(){var t=0;return e.trigger("firstSlide",[t]),t}),a("."+i.last,function(t,n){var i=n;return e.trigger("lastSlide",[i]),i})}function o(t,n,i,a,s){var r=i(function(e,t){return e==t?0:e+1},function(){e(this).delay(s).queue(function(){r(),e(this).dequeue()})});t.find(".play").bind("click",function(e){e.preventDefault(),r()}),t.find(".stop").bind("click",function(e){e.preventDefault(),n.clearQueue()})}function u(e,t,n){var i=e.find(".title."+n);i.removeClass("selected"),i.eq(t).addClass("selected")}function d(e,t,n){var i=e.find(".first,.prev"),a=e.find(".last,.next");0===t?i.addClass("disabled"):i.removeClass("disabled"),t==n-1?a.addClass("disabled"):a.removeClass("disabled")}function f(t,n){t.each(function(t,i){e(i).removeClass("prev current next"),t==n-1&&e(i).addClass("prev"),t==n&&e(i).addClass("current"),t==n+1&&e(i).addClass("next")})}function v(t){return t.each(function(){e(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}e.fn.caro=function(i){return this.each(function(){var a=e(this),s=e.extend(!0,{dir:"horizontal",delay:300,still:1e3,autoPlay:!1,classes:{button:"button",navi:"navi",prev:"prev",next:"next",first:"first",last:"last"},autoNavi:!1,cycle:!1,resize:!0,resizeDelay:300},i),r="horizontal"==s.dir?t:n;r(a,s)})}})(jQuery);