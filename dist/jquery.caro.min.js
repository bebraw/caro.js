(function(n){function e(n,e){i(n,e,"left","width")}function t(n,e){i(n,e,"top","height")}function i(e,t,i,v){function p(n,e){return function(){t.cycle?(k=n(k,z-1),0>k&&(k=z-1),k>z-1&&(k=0)):k=s(n(k,z-1),0,z-1);var a={};a[i]=-100*k+"%",m.animate(a,t.delay,e),b(k,t.buttonClass)}}function b(n,i){u(y,n,i),t.cycle||d(e,n,z),f(g,n),t.resize&&C.animate({height:g.eq(n).height()||void 0},t.resizeDelay,function(){e.parents(".slides").siblings(".navi").find(".selected."+i+":first").trigger("click")})}var C=n(".slides:first",e),g=C.children().append(n("<div>")),m=n("<div>").append(g).appendTo(C),y=n("."+t.naviClass+":last",e),z=g.length,k=0;r(C,v,m,i,g),l(g,y,p,t.autoNavi,t.buttonClass),c(e,m,p),o(e,m,p,t.autoPlay,t.still),t.resize&&a(C,g,k),b(k,t.buttonClass),h(e),n(window).resize(function(){a(C,g,k)})}function a(n,e,t){n.height(e.eq(t).height()||void 0)}function s(n,e,t){return Math.min(Math.max(n,e),t)}function r(e,t,i,a,s){e.css("overflow","hidden");var r={position:"relative"};r[t]=100*s.length+"%",r[a]="0%",i.css(r);var l={display:"top"==a?"auto":"inline-block","vertical-align":"top"},c=100/s.length;l[t]=parseInt(c,10)+"%";var o=(c-parseInt(c,10))/2+"%";"width"==t?(l["margin-left"]=o,l["margin-right"]=o):(l["margin-top"]=o,l["margin-bottom"]=o),s.each(function(e,t){n(t).css(l).addClass("slide")})}function l(e,t,i,a,s){e.each(function(e,r){var l=n("<a>",{href:"#"}).css("display","inline").bind("click",function(n){n.preventDefault(),i(function(){return e})()}).appendTo(t).addClass("title "+s);a?n(r).clone().appendTo(l):l.text(n(r).attr("title")||e+1)})}function c(n,e,t){function i(i,a){n.find(i).bind("click",function(n){n.preventDefault(),e.clearQueue(),t(a)()})}i(".prev",function(n){return n-1}),i(".next",function(n){return n+1}),i(".first",function(){return 0}),i(".last",function(n,e){return e})}function o(e,t,i,a,s){var r=i(function(n,e){return n==e?0:n+1},function(){n(this).delay(s).queue(function(){r(),n(this).dequeue()})});e.find(".play").bind("click",function(n){n.preventDefault(),r()}),e.find(".stop").bind("click",function(n){n.preventDefault(),t.clearQueue()})}function u(n,e,t){var i=n.find(".title."+t);i.removeClass("selected"),i.eq(e).addClass("selected")}function d(n,e,t){var i=n.find(".first,.prev"),a=n.find(".last,.next");0===e?i.addClass("disabled"):i.removeClass("disabled"),e==t-1?a.addClass("disabled"):a.removeClass("disabled")}function f(e,t){e.each(function(e,i){n(i).removeClass("prev current next"),e==t-1&&n(i).addClass("prev"),e==t&&n(i).addClass("current"),e==t+1&&n(i).addClass("next")})}function h(e){return e.each(function(){n(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}n.fn.caro=function(i){return this.each(function(){var a=n(this),s=n.extend({dir:"horizontal",delay:300,still:1e3,autoPlay:!1,naviClass:"navi",buttonClass:"button",autoNavi:!1,cycle:!1,resize:!0,resizeDelay:300},i),r="horizontal"==s.dir?e:t;r(a,s)})}})(jQuery);