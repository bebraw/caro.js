(function(e){function t(e,t){i(e,t,"left","width")}function n(e,t){i(e,t,"top","height")}function i(t,n,i,v){function h(e,a){return function(){n.cycle?(z=e(z,x-1),0>z&&(z=x-1),z>x-1&&(z=0)):z=s(e(z,x-1),0,x-1);var r={};r[i]=-100*z+"%",y.animate(r,n.delay,a),p(z,n.classes.button),g(z,n.classes.button),t.trigger("updateSlide",[z])}}function p(e,i){o(C,e,i),n.cycle||u(t,e,x),d(m,e)}function g(e,i){b.css("height",m.eq(e).height()),n.resize&&b.animate({height:m.eq(e).height()||void 0},n.resizeDelay,function(){t.parents(".slides").siblings(".navi").find(".selected."+i+":first").trigger("click")})}var b=e(".slides:first",t),m=b.children().append(e("<div>")),y=e("<div>").append(m).appendTo(b),C=e("."+n.classes.navi+":last",t),x=m.length,z=n.initialSlide;a(b,v,y,i,m),r(m,C,h,n.autoNavi,n.classes.button),l(t,y,h,n.classes),c(t,y,h,n.autoPlay,n.still),n.resize&&g(b,m,z),f(t),e(window).resize(function(){g(b,m,z)}),z&&(y.css(i,-100*z+"%"),b.css("height",m.eq(z).height())),p(z,n.classes.button)}function s(e,t,n){return Math.min(Math.max(e,t),n)}function a(t,n,i,s,a){t.css("overflow","hidden");var r={position:"relative"};r[n]=100*a.length+"%",r[s]="0%",i.css(r);var l={display:"top"==s?"auto":"inline-block","vertical-align":"top"},c=100/a.length;l[n]=parseInt(c,10)+"%";var o=(c-parseInt(c,10))/2+"%";"width"==n?(l["margin-left"]=o,l["margin-right"]=o):(l["margin-top"]=o,l["margin-bottom"]=o),a.each(function(t,n){e(n).css(l).addClass("slide")})}function r(t,n,i,s,a){t.each(function(t,r){var l=e("<a>",{href:"#"}).css("display","inline").bind("click",function(e){e.preventDefault(),i(function(){return t})()}).appendTo(n).addClass("title "+a);s?e(r).clone().appendTo(l):l.text(e(r).attr("title")||t+1)})}function l(e,t,n,i){function s(i,s){e.find(i).bind("click",function(e){e.preventDefault(),t.clearQueue(),n(s)()})}s("."+i.prev,function(t){var n=t-1;return e.trigger("previousSlide",[n]),n}),s("."+i.next,function(t){var n=t+1;return e.trigger("nextSlide",[n]),n}),s("."+i.first,function(){var t=0;return e.trigger("firstSlide",[t]),t}),s("."+i.last,function(t,n){var i=n;return e.trigger("lastSlide",[i]),i})}function c(t,n,i,s,a){var r=i(function(e,t){return e==t?0:e+1},function(){e(this).delay(a).queue(function(){r(),e(this).dequeue()})});t.find(".play").bind("click",function(e){e.preventDefault(),r()}),t.find(".stop").bind("click",function(e){e.preventDefault(),n.clearQueue()})}function o(e,t,n){var i=e.find(".title."+n);i.removeClass("selected"),i.eq(t).addClass("selected")}function u(e,t,n){var i=e.find(".first,.prev"),s=e.find(".last,.next");0===t?i.addClass("disabled"):i.removeClass("disabled"),t==n-1?s.addClass("disabled"):s.removeClass("disabled")}function d(t,n){t.each(function(t,i){var s=e(i);s.removeClass("prev current next"),t==n-1&&s.addClass("prev"),t==n&&s.addClass("current"),t==n+1&&s.addClass("next")})}function f(t){return t.each(function(){e(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}e.fn.caro=function(i){return this.each(function(){var s=e(this),a=e.extend(!0,{dir:"horizontal",delay:300,still:1e3,autoPlay:!1,classes:{button:"button",navi:"navi",prev:"prev",next:"next",first:"first",last:"last"},autoNavi:!1,cycle:!1,resize:!0,resizeDelay:300,initialSlide:0},i),r="horizontal"==a.dir?t:n;r(s,a)})}})(jQuery);